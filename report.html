<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>CivicTech Connect - Report Issue</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#1767e8",
            "background-light": "#f6f7f8",
            "background-dark": "#111721",
            "card-light": "#ffffff",
            "card-dark": "#1a2431",
            "text-light": "#111721",
            "text-dark": "#f6f7f8",
            "subtle-text-light": "#6b7280",
            "subtle-text-dark": "#9ca3af",
            "border-light": "#e5e7eb",
            "border-dark": "#374151"
          },
          fontFamily: {
            "display": ["Public Sans", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.75rem",
            "lg": "1rem",
            "xl": "1.5rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>
  <style>
    .progress-bar::-webkit-progress-bar {
      background-color: #e5e7eb;
      border-radius: 0.75rem;
    }

    .progress-bar::-webkit-progress-value {
      background-color: #1767e8;
      border-radius: 0.75rem;
    }

    .progress-bar::-moz-progress-bar {
      background-color: #1767e8;
      border-radius: 0.75rem;
    }

    .dark .progress-bar::-webkit-progress-bar {
      background-color: #374151;
    }
  </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
  <div class="flex flex-col min-h-screen">
    <!-- HEADER -->
    <header class="sticky top-0 z-20 bg-card-light/80 dark:bg-card-dark/80 backdrop-blur-lg border-b border-border-light dark:border-border-dark">
      <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- Logo -->
          <a href="#" class="flex items-center gap-3">
            <svg class="text-primary h-8 w-8" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M24 45.8096C19.6865 45.8096 15.4698 44.5305 11.8832 42.134C8.29667 39.7376 5.50128 36.3314 3.85056 32.3462C2.19985 28.361 1.76794 23.9758 2.60947 19.7452C3.451 15.5145 5.52816 11.6284 8.57829 8.5783C11.6284 5.52817 15.5145 3.45101 19.7452 2.60948C23.9758 1.76795 28.361 2.19986 32.3462 3.85057C36.3314 5.50129 39.7376 8.29668 42.134 11.8833C44.5305 15.4698 45.8096 19.6865 45.8096 24L24 24L24 45.8096Z"
                fill="currentColor"></path>
            </svg>
            <span class="text-xl font-bold">CivicTech Connect</span>
          </a>

          <!-- Nav Links -->
          <div class="hidden md:flex items-center space-x-8">
            <a href="./index.html"
              class="font-medium text-subtle-text-light dark:text-subtle-text-dark hover:text-primary transition-colors">Home</a>
            <a href="./track.html"
              class="font-medium text-primary">Track Your Complain</a>
          </div>

          <!-- Login Button -->
          <div class="flex items-center space-x-4">
            <a href="./login_page.html"
              class="bg-primary text-white font-bold py-2 px-5 rounded-lg hover:bg-primary/90 transition-all duration-300 transform hover:scale-105">
              Log In
            </a>
          </div>
        </div>
      </nav>
    </header>

    <!-- MAIN -->
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
      <div class="max-w-3xl mx-auto">
        <div class="bg-card-light dark:bg-card-dark rounded-xl shadow-lg overflow-hidden">
          <div class="p-6 sm:p-8">
            <h1 class="text-3xl font-bold mb-2">Report an Issue</h1>
            <p class="text-subtle-text-light dark:text-subtle-text-dark mb-8">Help us improve your community by reporting issues you encounter.</p>

            <form class="space-y-6">
              <!-- Location + Category -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium mb-2" for="location">Location</label>
                  <div class="relative">
                    <input class="w-full h-12 px-4 pr-12 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded focus:ring-2 focus:ring-primary focus:border-primary transition-shadow"
                      disabled id="location" placeholder="Fetching location..." type="text" />
                    <span
                      class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-subtle-text-light dark:text-subtle-text-dark">my_location</span>
                  </div>
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2" for="category">Category</label>
                  <select
                    class="w-full h-12 px-4 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded focus:ring-2 focus:ring-primary focus:border-primary transition-shadow"
                    id="category">
                    <option>Select a category</option>
                    <option>Roads &amp; Potholes</option>
                    <option>Water Supply</option>
                    <option>Electricity Outage</option>
                    <option>Waste Management</option>
                    <option>Public Parks</option>
                  </select>
                </div>
              </div>

              <!-- Description -->
              <div>
                <label class="block text-sm font-medium mb-2" for="description">Description</label>
                <textarea
                  class="w-full p-4 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded focus:ring-2 focus:ring-primary focus:border-primary transition-shadow"
                  id="description" placeholder="Please provide a brief description of the issue..." rows="4"></textarea>
              </div>

              <!-- Upload Media -->
              <div>
                <label class="block text-sm font-medium mb-2">Upload Media</label>
                <div
                  class="mt-2 flex justify-center rounded-lg border-2 border-dashed border-border-light dark:border-border-dark px-6 py-10">
                  <div class="text-center">
                    <span
                      class="material-symbols-outlined text-5xl text-subtle-text-light dark:text-subtle-text-dark">cloud_upload</span>
                    <div class="mt-4 flex text-sm leading-6 text-subtle-text-light dark:text-subtle-text-dark">
                      <label class="relative cursor-pointer rounded-md font-semibold text-primary hover:text-primary/80"
                        for="file-upload">
                        <span>Upload a file</span>
                        <input class="sr-only" id="file-upload" multiple name="file-upload" type="file" />
                      </label>
                      <p class="pl-1">or drag and drop</p>
                    </div>
                    <p class="text-xs leading-5 text-subtle-text-light dark:text-subtle-text-dark">PNG, JPG, GIF, MP4 up to 10MB</p>
                  </div>
                </div>
              </div>

              <!-- Voice Note -->
              <div>
                <label class="block text-sm font-medium mb-2">Voice Note</label>
                <div
                  class="mt-2 flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-border-light dark:border-border-dark px-6 py-8 space-y-4">
                  <button type="button" id="record-btn"
                    class="bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary/90 transition-all">üéôÔ∏è Start
                    Recording</button>
                  <audio id="audio-preview" class="hidden w-full mt-2" controls></audio>
                  <p class="text-xs text-subtle-text-light dark:text-subtle-text-dark">Record live audio or upload below</p>
                  <input type="file" id="voice-upload" accept="audio/*"
                    class="w-full text-sm text-subtle-text-light dark:text-subtle-text-dark" />
                </div>
              </div>

              <!-- Progress -->
              <div class="space-y-2 hidden" id="progress-section">
                <label class="text-sm font-medium">Uploading...</label>
                <progress class="w-full progress-bar" max="100" value="75"></progress>
              </div>

              <!-- Submit -->
              <div class="pt-4 flex justify-end">
                <button
                  class="w-full md:w-auto bg-primary text-white font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background-light dark:focus:ring-offset-background-dark focus:ring-primary transition-all duration-300 transform hover:scale-105"
                  type="submit">
                  Submit Report
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Success -->
        <div
          class="hidden mt-8 bg-green-100 dark:bg-green-900/50 border-l-4 border-green-500 text-green-700 dark:text-green-300 p-4 rounded-lg"
          id="success-message" role="alert">
          <div class="flex">
            <div class="py-1"><span class="material-symbols-outlined mr-2">check_circle</span></div>
            <div>
              <p class="font-bold">Complaint Registered Successfully!</p>
              <p class="text-sm">Your reference number is #CIVIC12345. You can track the status on the 'Track Status' page.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer
      class="mt-auto bg-background-light dark:bg-background-dark border-t border-border-light dark:border-border-dark">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm text-subtle-text-light dark:text-subtle-text-dark">
        <p>Hackathon 2025 &copy; IMPACT BRIDGE</p>
      </div>
    </footer>
  </div>

  <script>
    // Mockup script for form submission and progress
    const form = document.querySelector('form');
    const progressSection = document.getElementById('progress-section');
    const progressBar = progressSection.querySelector('progress');
    const successMessage = document.getElementById('success-message');
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      progressSection.classList.remove('hidden');
      successMessage.classList.add('hidden');
      let progress = 0;
      const interval = setInterval(() => {
        progress += 10;
        progressBar.value = progress;
        if (progress >= 100) {
          clearInterval(interval);
          progressSection.classList.add('hidden');
          successMessage.classList.remove('hidden');
          form.reset();
        }
      }, 200);
    });

    // Voice Recording
    const recordBtn = document.getElementById('record-btn');
    const audioPreview = document.getElementById('audio-preview');
    let mediaRecorder;
    let chunks = [];

    recordBtn.addEventListener('click', async () => {
      if (recordBtn.textContent.includes("Start")) {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.start();
        recordBtn.textContent = "‚èπÔ∏è Stop Recording";
        chunks = [];
        mediaRecorder.ondataavailable = e => chunks.push(e.data);
        mediaRecorder.onstop = () => {
          const blob = new Blob(chunks, { type: 'audio/webm' });
          const url = URL.createObjectURL(blob);
          audioPreview.src = url;
          audioPreview.classList.remove('hidden');
        };
      } else {
        mediaRecorder.stop();
        recordBtn.textContent = "üéôÔ∏è Start Recording";
      }
    });
  </script>
</body>

</html>
